<?xml version="1.0" encoding="UTF-8"?>
<tns:configuration xmlns:tns="http://www.sics.se/adl">
	<tns:factories>
		<tns:factory>
			<tns:factoryName>ApplicationComponentFactory</tns:factoryName>
			<tns:componentClass>components.ApplicationComponent</tns:componentClass>
		</tns:factory>
		<tns:factory>
			<tns:factoryName>PerfectFailureDetectorComponentFactory</tns:factoryName>
			<tns:componentClass>components.PerfectFailureDetectorComponent</tns:componentClass>
		</tns:factory>
		<tns:factory>
			<tns:factoryName>DelayComponentFactory</tns:factoryName>
			<tns:componentClass>components.DelayComponent</tns:componentClass>
		</tns:factory>
		<tns:factory>
			<tns:factoryName>CommunicationComponentFactory</tns:factoryName>
			<tns:componentClass>tbn.comm.mina.CommunicationComponent</tns:componentClass>
		</tns:factory>
		<tns:factory>
			<tns:factoryName>TimerComponentFactory</tns:factoryName>
			<tns:componentClass>tbn.timer.TimerComponent</tns:componentClass>
		</tns:factory>
	</tns:factories>
	<tns:components>
		<tns:component>
			<tns:factoryName>ApplicationComponentFactory</tns:factoryName>
			<tns:componentName>ApplicationComponent</tns:componentName>
			<tns:initFile>node.properties</tns:initFile>
		</tns:component>
		<tns:component>
			<tns:factoryName>PerfectFailureDetectorComponentFactory</tns:factoryName>
			<tns:componentName>PerfectFailureDetectorComponent</tns:componentName>
		</tns:component>
		<tns:component>
			<tns:factoryName>DelayComponentFactory</tns:factoryName>
			<tns:componentName>DelayComponent</tns:componentName>
		</tns:component>
		<tns:component>
			<tns:factoryName>CommunicationComponentFactory</tns:factoryName>
			<tns:componentName>CommunicationComponent</tns:componentName>
		</tns:component>
		<tns:component>
			<tns:factoryName>TimerComponentFactory</tns:factoryName>
			<tns:componentName>TimerComponent</tns:componentName>
		</tns:component>
	</tns:components>
	<tns:channels>
		<tns:channel>
			<tns:channelName>DeliverHeartBeatMessageChannel</tns:channelName>
			<tns:eventClass>assignment2.events.HeartbeatMessage</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>CrashEventChannel</tns:channelName>
			<tns:eventClass>assignment2.events.CrashEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>InitEventChannel</tns:channelName>
			<tns:eventClass>assignment2.events.InitEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>DelayMessageChannel</tns:channelName>
			<tns:eventClass>tbn.comm.mina.events.MessageEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>TimerEventChannel</tns:channelName>
			<tns:eventClass>tbn.timer.events.TimerEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>SendMessageChannel</tns:channelName>
			<tns:eventClass>tbn.comm.mina.events.MessageEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>DelayTimerExpiredEventChannel</tns:channelName>
			<tns:eventClass>assignment2.events.DelayTimerExpiredEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>CheckTimeOutEventChannel</tns:channelName>
			<tns:eventClass>assignment2.events.CheckTimeoutEvent</tns:eventClass>
		</tns:channel>
		<tns:channel>
			<tns:channelName>HeartbeatTimeOutEventChannel</tns:channelName>
			<tns:eventClass>assignment2.events.HeartbeatTimeoutEvent</tns:eventClass>
		</tns:channel>
	</tns:channels>
	<tns:bindings>
		<tns:binding>
			<tns:componentName>ApplicationComponentFactory:ApplicationComponent</tns:componentName>
			<tns:eventClass>assignment2.events.InitEvent</tns:eventClass>
			<tns:channelName>InitEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>CommunicationComponentFactory:CommunicationComponent</tns:componentName>
			<tns:eventClass>assignment2.events.HeartbeatMessage</tns:eventClass>
			<tns:channelName>DeliverHeartBeatMessageChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:eventClass>tbn.comm.mina.events.MessageEvent</tns:eventClass>
			<tns:channelName>SendMessageChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:eventClass>tbn.timer.events.TimerEvent</tns:eventClass>
			<tns:channelName>TimerEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>TimerComponentFactory:TimerComponent</tns:componentName>
			<tns:eventClass>assignment2.events.DelayTimerExpiredEvent</tns:eventClass>
			<tns:channelName>DelayTimerExpiredEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>TimerComponentFactory:TimerComponent</tns:componentName>
			<tns:eventClass>assignment2.events.HeartbeatTimeoutEvent</tns:eventClass>
			<tns:channelName>HeartbeatTimeOutEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>TimerComponentFactory:TimerComponent</tns:componentName>
			<tns:eventClass>assignment2.events.CheckTimeoutEvent</tns:eventClass>
			<tns:channelName>CheckTimeOutEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:eventClass>tbn.timer.events.TimerEvent</tns:eventClass>
			<tns:channelName>TimerEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:eventClass>assignment2.events.CrashEvent</tns:eventClass>
			<tns:channelName>CrashEventChannel</tns:channelName>
		</tns:binding>
		<tns:binding>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:eventClass>tbn.comm.mina.events.MessageEvent</tns:eventClass>
			<tns:channelName>DelayMessageChannel</tns:channelName>
		</tns:binding>
	</tns:bindings>
	<tns:subscriptions>
		<tns:subscription>
			<tns:componentName>ApplicationComponentFactory:ApplicationComponent</tns:componentName>
			<tns:channelName>CrashEventChannel</tns:channelName>
			<tns:handlerName>handleCrashEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:channelName>InitEventChannel</tns:channelName>
			<tns:handlerName>handleInitEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:channelName>DelayMessageChannel</tns:channelName>
			<tns:handlerName>handleMessageEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:channelName>DelayTimerExpiredEventChannel</tns:channelName>
			<tns:handlerName>handleDelayTimerExpiredEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>CommunicationComponentFactory:CommunicationComponent</tns:componentName>
			<tns:channelName>SendMessageChannel</tns:channelName>
			<tns:handlerName>handleSendEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:channelName>DeliverHeartBeatMessageChannel</tns:channelName>
			<tns:handlerName>handleHeartbeatMessage</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:channelName>InitEventChannel</tns:channelName>
			<tns:handlerName>handleInitEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:channelName>CheckTimeOutEventChannel</tns:channelName>
			<tns:handlerName>handleCheckTimeoutEvent</tns:handlerName>
		</tns:subscription>
		<tns:subscription>
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:channelName>HeartbeatTimeOutEventChannel</tns:channelName>
			<tns:handlerName>handleHeartbeatTimeoutEvent</tns:handlerName>
		</tns:subscription>	
		<tns:subscription>
			<tns:componentName>TimerComponentFactory:TimerComponent</tns:componentName>
			<tns:channelName>TimerEventChannel</tns:channelName>
			<tns:handlerName>handleTimerEvent</tns:handlerName>
		</tns:subscription>
	</tns:subscriptions>
	<tns:startSequence>
		<tns:startComponents>
			<tns:componentName>TimerComponentFactory:TimerComponent</tns:componentName>
			<tns:componentName>DelayComponentFactory:DelayComponent</tns:componentName>
			<tns:componentName>CommunicationComponentFactory:CommunicationComponent</tns:componentName>			
			<tns:componentName>PerfectFailureDetectorComponentFactory:PerfectFailureDetectorComponent</tns:componentName>
			<tns:componentName>ApplicationComponentFactory:ApplicationComponent</tns:componentName>
		</tns:startComponents>
		<tns:startChannels>
			<tns:channelName>DelayTimerExpiredEventChannel</tns:channelName>
			<tns:channelName>HeartbeatTimeOutEventChannel</tns:channelName>
			<tns:channelName>CheckTimeOutEventChannel</tns:channelName>
			<tns:channelName>TimerEventChannel</tns:channelName>
			<tns:channelName>DelayMessageChannel</tns:channelName>
			<tns:channelName>SendMessageChannel</tns:channelName>
			<tns:channelName>DeliverHeartBeatMessageChannel</tns:channelName>
			<tns:channelName>CrashEventChannel</tns:channelName>
			<tns:channelName>InitEventChannel</tns:channelName>
		</tns:startChannels>
	</tns:startSequence>
</tns:configuration>
